(()=>{"use strict";var e={171:(e,t,E)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.init=void 0;const T=E(831),{window:o,Position:n,Range:r,workspace:s}=E(496);let i,A,N;t.init=()=>{if(i=o.activeTextEditor,!i)throw new Error("当前没有激活的页面！");A=i.document,N=A.getText();let e="";e=(0,T.generate)((0,T.parse)(N),{});let t=new n(0,0),E=new n(A.lineCount+1,0),s=new r(t,E);i.edit(((t,E)=>{E&&o.showErrorMessage(E),t.replace(s,e)}))}},731:(e,t)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.throwError=t.NOOP=void 0,t.NOOP=()=>{},t.throwError=function(e){throw new Error(e)}},761:(e,t,E)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.generate=t.genValueStr=void 0;const T=E(80),o=e=>!(e.type===T.NODE_TYPES.TEXT&&!e.textContent.trim());function n(e,E={},r="\n"){var s,i;const{maxWidth:A=120,compress:N}=E;let O=r+"\t";const a={[T.NODE_TYPES.TEXT](e){const t=e.textContent;return"text"===e.parentNode.tagName?t:t.trim()||""},[T.NODE_TYPES.COMMENT]:e=>N?"":`\x3c!--${e.comment}--\x3e`,[T.NODE_TYPES.ELEMENT](e){var s;const i=e.tagName||"",a=Object.keys(e.attributes).map((E=>t.genValueStr(E,e.attributes[E],N)));let S=a.join(" "),d=!N&&(null==S?void 0:S.length)>A;"text"===i&&(r="",O="",d=!1);const c=d?r:"",_=c+">";if(S&&(S=d?O+a.join(O):" "+S),e.selfClosing)return`<${i}${S}${d?c:" "}/>`;if(e.childNodes.length){const t=e.childNodes.filter(o),a=1===t.length&&t[0].type===T.NODE_TYPES.TEXT&&(null===(s=t[0].textContent)||void 0===s?void 0:s.length)<A;let d=t.map((e=>n(e,E,O))).join(N?"":O);return!N&&d&&(d=(a?"":O)+d+(a?"":r)),`<${i||""}${S}${_}${d}</${i}>`}return`<${i}${S}${_}</${i}>`}};return a[null==e?void 0:e.type]?a[e.type](e):((null===(s=e)||void 0===s?void 0:s.childNodes)||[]).length?t.generate(null===(i=e)||void 0===i?void 0:i.childNodes,E):void 0}t.genValueStr=(e,t,E=!1)=>{if(!0===t)return e;t=t.trim();const T=E?"":" ",o=/\{\{\s*(.+)\s*\}\}/g;let n;return n=/^(bind|catch).+/g.test(e)?t.replace(o,((e,t)=>t.trim())):/^wx\:.+/g.test(e)&&/^wx\:key/g.test(e)&&!o.test(t)||/^wx\:.+/g.test(e)&&/^wx\:for\-item/g.test(e)&&!o.test(t)||/^wx\:.+/g.test(e)&&/^wx\:for\-index/g.test(e)&&!o.test(t)?`${t}`:/^wx\:.+/g.test(e)&&!o.test(t)?`{{${T}${t}${T}}}`:t,`${e}="${E?n:n.replace(o,((e,t)=>`{{${T}${t.trim()}${T}}}`))}"`},t.generate=(e,t)=>{const{compress:E}=t;return Array.isArray(e)&&e.length?e.filter(o).map((e=>n(e,t))).join(E?"":"\n"):n(e,t,"\n")}},831:(e,t,E)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.traverse=t.generate=t.NODE_TYPES=t.parse=void 0;const T=E(414);Object.defineProperty(t,"parse",{enumerable:!0,get:function(){return T.parse}});const o=E(761);Object.defineProperty(t,"generate",{enumerable:!0,get:function(){return o.generate}});const n=E(80);Object.defineProperty(t,"NODE_TYPES",{enumerable:!0,get:function(){return n.NODE_TYPES}});const r=E(158);Object.defineProperty(t,"traverse",{enumerable:!0,get:function(){return r.traverse}})},145:(e,t,E)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.checkValidate=void 0;const T=E(731),o=E(158),n=E(80);t.checkValidate=e=>{o.traverse(e,{[n.NODE_TYPES.ELEMENT](e){e.selfClosing||e.closing||T.throwError(`${e.tagName} 标签未正确闭合，无法解析`),"wxs"===e.tagName&&(e.attributes.module||T.throwError(`${e.tagName} 标签 必须具有 module 属性`),e.childNodes.length&&!e.childNodes[0].textContent.includes("module.exports")&&T.throwError(`${e.tagName} 必须含有模块导出，如 module.exports = e.g.`))}})}},414:(e,t,E)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.parse=void 0;const T=E(731),o=E(145),n=E(517),r=E(960),s=E(80);t.parse=e=>{const t={type:s.NODE_TYPES.ROOT,childNodes:[]};let E=t,i=null,A="";const N={[s.TYPES.TEXT](e){E.childNodes.push(new n.TextNode(e,E))},[s.TYPES.TAG_OPEN](e){i=new n.ElementNode({tagName:e})},[s.TYPES.TAG_CLOSE]:(e,o)=>(A&&(i.attributes[A]=!0,A=""),e&&o&&T.throwError("Unexpected closing with selfClosing. e.g. </tag />"),o?(i||T.throwError("Unexpected null node"),i.selfClosing=!0,E.childNodes.push(i),void(i=null)):e?(i=E,E=i.parentNode||t,void(i.closing=!0)):(E.childNodes.push(i),i.parentNode=E||t,E=i,void(i=null))),[s.TYPES.ATTRIBUTE_NAME](e){A=e,i.attributes[A]=!0},[s.TYPES.ATTRIBUTE_VALUE](e){i.attributes[A]=e,A=""},[s.TYPES.COMMENT](e){E.childNodes.push(new n.CommentNode(e))}};return r.token(e,(function(e,...t){(0,N[e])(...t)}),(()=>({node:i,parent:E}))),o.checkValidate(t),t}},517:(e,t,E)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.ElementNode=t.TextNode=t.CommentNode=void 0;const T=E(80);class o extends T.BaseNode{constructor(e){super(T.NODE_TYPES.COMMENT),this.comment=e}toJSON(){return{type:this.type,comment:this.comment}}}t.CommentNode=o;class n extends T.BaseNode{constructor(e,t){super(T.NODE_TYPES.TEXT),this.textContent=e,this.parentNode=t}toJSON(){return{type:this.type,textContent:this.textContent}}}t.TextNode=n;class r extends T.BaseNode{constructor({tagName:e=""}={}){super(T.NODE_TYPES.ELEMENT),this.tagName=e,this.attributes={},this.childNodes=[],this.selfClosing=!1,this.closing=!1}toJSON(){return{type:this.type,tagName:this.tagName,attributes:this.attributes,selfClosing:this.selfClosing,childNodes:this.childNodes.map((function(e){return e.toJSON()}))}}}t.ElementNode=r},960:(e,t,E)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.token=void 0;const T=E(731),o=E(80);var n,r,s;!function(e){e.LT="<",e.GT=">",e.EXCLAMATION="!",e.SLASH="/",e.MINUS="-",e.BACK_SLASH="\\",e.SPACE=" ",e.TABLE="\t",e.EQUAL="=",e.QUESTION="?",e.SINGLE_QUOTE="'",e.DOUBLE_QUOTE='"',e.LINE_FEED="\n",e.CARRIAGE_RETURN="\r",e.BRACE_LEFT="{",e.BRACE_RIGHT="}"}(n||(n={})),function(e){e.SPACE="ACTIONS(SPACE)",e.LT="ACTIONS(LT)",e.GT="ACTIONS(GT)",e.DOUBLE_QUOTE="ACTIONS(DOUBLE_QUOTE)",e.SINGLE_QUOTE="ACTIONS(SINGLE_QUOTE)",e.EQUAL="ACTIONS(EQUAL)",e.SLASH="ACTIONS(SLASH)",e.EXCLAMATION="ACTIONS(EXCLAMATION)",e.QUESTION="ACTIONS(QUESTION)",e.CHAR="ACTIONS(CHAR)",e.MINUS="ACTIONS(MINUS)",e.BACK_SLASH="ACTIONS(BACK_SLASH)",e.BRACE_LEFT="ACTIONS(BRACE_LEFT)",e.BRACE_RIGHT="ACTIONS(BRACE_RIGHT)"}(r||(r={})),function(e){e.TEXT="STATE(TEXT)",e.TAG_OPEN="STATE(TAG_OPEN)",e.TAG_NAME="STATE(TAG_NAME)",e.ATTRIBUTE_NAME="STATE(ATTRIBUTE_NAME)",e.ATTRIBUTE_VALUE="STATE(ATTRIBUTE_VALUE)",e.COMMENT="STATE(COMMENT)"}(s||(s={}));const i={[n.SPACE]:r.SPACE,[n.TABLE]:r.SPACE,[n.LINE_FEED]:r.SPACE,[n.CARRIAGE_RETURN]:r.SPACE,[n.LT]:r.LT,[n.GT]:r.GT,[n.DOUBLE_QUOTE]:r.DOUBLE_QUOTE,[n.SINGLE_QUOTE]:r.SINGLE_QUOTE,[n.EQUAL]:r.EQUAL,[n.SLASH]:r.SLASH,[n.EXCLAMATION]:r.EXCLAMATION,[n.QUESTION]:r.QUESTION,[n.MINUS]:r.MINUS,[n.BACK_SLASH]:r.BACK_SLASH,[n.BRACE_LEFT]:r.BRACE_LEFT,[n.BRACE_RIGHT]:r.BRACE_RIGHT};t.token=(e,t,E)=>{const A=e.length;let N,O=1,a=1,S=0,d="",c=s.TEXT,_=!1,l=!1;function u(e){d+=e}function C(e,t){return function(E){throw new Error("Unexpected char `"+E+"` in state `"+e+"` with action `"+t+"`line:"+a+",column:"+O)}}const P=e=>{const{parent:t}=E();if("wxs"===(null==t?void 0:t.tagName)){if(!N)return N=e,void u(e);N===e?(N="",u(e)):u(e)}else u(e)},L={[s.TEXT]:{[r.CHAR](e){u(e),S===A-1&&(t(o.TYPES.TEXT,d),d="")},[r.LT](T){const{parent:r}=E();if("wxs"===r.tagName&&N)return void u(T);const i=e[S+1];i!==n.LT&&i!==n.GT?(d&&(t(o.TYPES.TEXT,d),d=""),c=s.TAG_OPEN):u(T)},[r.DOUBLE_QUOTE]:P,[r.SINGLE_QUOTE]:P},[s.TAG_OPEN]:{[r.SPACE]:T.NOOP,[r.LT]:C("TAG_OPEN","LT"),[r.GT]:C("TAG_OPEN","GT"),[r.SINGLE_QUOTE]:C("TAG_OPEN","SINGLE_QUOTE"),[r.DOUBLE_QUOTE]:C("TAG_OPEN","DOUBLE_QUOTE"),[r.EQUAL]:C("TAG_OPEN","EQUAL"),[r.QUESTION]:C("TAG_OPEN","EQUAL"),[r.BRACE_LEFT]:C("TAG_OPEN","BRACE_LEFT"),[r.BRACE_RIGHT]:C("TAG_OPEN","BRACE_RIGHT"),[r.CHAR](e){_=!1,c=s.TAG_NAME,function(){if(d)throw new Error("Unexpected text: "+d)}(),u(e)},[r.SLASH](){_=!0,c=s.TAG_NAME},[r.EXCLAMATION](t){if(e[S+1]===n.MINUS&&e[S+2]===n.MINUS)return c=s.COMMENT,void(S+=2);C("TAG_OPEN","EXCLAMATION")(t)}},[s.TAG_NAME]:{[r.CHAR]:u,[r.SPACE](){d&&(t(o.TYPES.TAG_OPEN,d,_),d="",c=s.ATTRIBUTE_NAME)},[r.SLASH](t){e[S+1]!==n.GT?C("TAG_NAME","SLASH")(t):l=!0},[r.GT](){const e=s.TEXT;t(o.TYPES.TAG_OPEN,d,_),t(o.TYPES.TAG_CLOSE,_,l),d="",_=!1,l=!1,c=e}},[s.ATTRIBUTE_NAME]:{[r.SPACE](){d&&(t(o.TYPES.ATTRIBUTE_NAME,d),d="")},[r.EQUAL](){d&&(t(o.TYPES.ATTRIBUTE_NAME,d),d=""),c=s.ATTRIBUTE_VALUE},[r.SLASH](t){e[S+1]!==n.GT?C("ATTRIBUTE_NAME","SLASH")(t):l=!0},[r.GT](){d&&(t(o.TYPES.ATTRIBUTE_NAME,d),d=""),t(o.TYPES.TAG_CLOSE,_,l),l=!1,c=s.TEXT},[r.CHAR]:u},[s.ATTRIBUTE_VALUE]:(()=>{const E=o.TYPES.ATTRIBUTE_VALUE,T=s.ATTRIBUTE_NAME,n=e=>{if(N)return N===e?(t(E,d),N="",d="",void(c=T)):void u(e);N=e};return{[r.DOUBLE_QUOTE]:n,[r.SINGLE_QUOTE]:n,[r.SPACE](e){N?u(e):d&&(t(E,d),d="",c=T)},[r.GT](e){N?u(e):(t(E,d),d="",t(o.TYPES.TAG_CLOSE,_,l),_=!1,l=!1,c=s.TEXT)},[r.BACK_SLASH](){N&&e[S+1]===N&&(d+="\\"+N,S++,O++)},[r.CHAR]:u}})(),[s.COMMENT]:{[r.CHAR]:u,[r.MINUS](E){if(e[S+1]===n.MINUS&&e[S+2]===n.GT)return S+=2,O+=2,t(o.TYPES.COMMENT,d),d="",void(c=s.TEXT);u(E)}}};for(;S<A;){const t=e[S],E=L[c],T=t in i?i[t]:r.CHAR,o=T in E?E[T]:E[r.CHAR];o&&o(t),"\n"===t?(a++,O=1):O++,S++}}},158:(e,t,E)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.traverse=void 0;const T=E(80);T.NODE_TYPES.ELEMENT,T.NODE_TYPES.TEXT,T.NODE_TYPES.COMMENT,T.NODE_TYPES.ROOT,t.traverse=function(e,t){const E=e=>"function"==typeof t[e.type]&&t[e.type](e);Array.isArray(e)?e.forEach((e=>E(e))):(E(e),Array.isArray(e.childNodes)&&e.childNodes.forEach((e=>E(e))))}},80:(e,t)=>{var E,T;Object.defineProperty(t,"__esModule",{value:!0}),t.BaseNode=t.TYPES=t.NODE_TYPES=void 0,(T=t.NODE_TYPES||(t.NODE_TYPES={}))[T.ELEMENT=1]="ELEMENT",T[T.TEXT=3]="TEXT",T[T.COMMENT=8]="COMMENT",T[T.ROOT=0]="ROOT",(E=t.TYPES||(t.TYPES={}))[E.TEXT=0]="TEXT",E[E.COMMENT=1]="COMMENT",E[E.TAG_OPEN=2]="TAG_OPEN",E[E.TAG_CLOSE=3]="TAG_CLOSE",E[E.ATTRIBUTE_NAME=4]="ATTRIBUTE_NAME",E[E.ATTRIBUTE_VALUE=5]="ATTRIBUTE_VALUE",E[E.MUSTACHE_OPEN=6]="MUSTACHE_OPEN",E[E.MUSTACHE_CLOSE=7]="MUSTACHE_CLOSE",t.BaseNode=class{constructor(e){this.type=e,this.parentNode=null}}},496:e=>{e.exports=require("vscode")}},t={};function E(T){var o=t[T];if(void 0!==o)return o.exports;var n=t[T]={exports:{}};return e[T](n,n.exports,E),n.exports}var T={};(()=>{var e=T;Object.defineProperty(e,"__esModule",{value:!0}),e.deactivate=e.activate=void 0;const t=E(496),o=E(171);e.activate=function(e){console.log("Miniso 格式化 wxml vscode 插件");let E=t.commands.registerCommand("parsewxml.minisoParsewxml",(()=>{let e=t.window.activeTextEditor;e?e&&"wxml"===e.document.languageId?(0,o.init)():t.window.showInformationMessage("不是.wxml文件，别瞎搞"):t.window.showInformationMessage("没有文件在编辑，小心顶哥头给你打爆！")}));e.subscriptions.push(E)},e.deactivate=function(){}})(),module.exports=T})();