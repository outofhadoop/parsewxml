"use strict";
Object.defineProperty(exports, "__esModule", { value: true });
exports.checkValidate = void 0;
const common_1 = require("../common");
const traverse_1 = require("./traverse");
const type_1 = require("./type");
const checkValidate = (root) => {
    // 遍历AST，不正确的属性将会报错
    traverse_1.traverse(root, {
        [type_1.NODE_TYPES.ELEMENT](node) {
            if (!node.selfClosing && !node.closing) {
                common_1.throwError(`${node.tagName} 标签未正确闭合，无法解析`);
            }
            if (node.tagName === "wxs") {
                if (!node.attributes["module"]) {
                    common_1.throwError(`${node.tagName} 标签 必须具有 module 属性`);
                }
                if (node.childNodes.length &&
                    !node.childNodes[0].textContent.includes(`module.exports`)) {
                    common_1.throwError(`${node.tagName} 必须含有模块导出，如 module.exports = e.g.`);
                }
            }
        },
    });
};
exports.checkValidate = checkValidate;
